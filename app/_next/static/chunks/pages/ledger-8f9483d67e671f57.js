(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{1456:function(n,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ledger",function(){return t(8639)}])},8639:function(n,r,t){"use strict";t.r(r),t.d(r,{default:function(){return B}});var e=t(3842),a=t(1809),s=t(5556),c=t(4246),i=t(7378),o=t(2088),l=t(353),u=t(2750),h=t(1083),d=t(5705),p=t(920),f=t(3049),m=t(8238),x=t(2222),j=t(4447),g=t(8196),Z=t(212),b=t(1223),v=t(5048),y=t(8830),_=t(8134),w=t(9894),k=t.n(w);function B(){var n=function(n){var r={},t={};return n.forEach((function(n){var e=n.op,a=n.tick,s=n.amt,c=n.from,i=n.to;switch(r[a]||(r[a]={}),t[a]||(t[a]={}),e){case"mint":r[a][i]=(r[a][i]||0)+parseInt(s);break;case"burn":r[a][c]-=parseInt(s);break;case"transfer":r[a][c]-=parseInt(s),r[a][i]=(r[a][i]||0)+parseInt(s)}t[a][c]||(t[a][c]=[]),t[a][i]||(t[a][i]=[]),t[a][c].push({op:e,amt:s,to:i,from:c}),t[a][i].push({op:e,amt:s,to:i,from:c})})),console.log(r),{balances:r,transactionsByAccount:t}},r=(0,i.useContext)(_.z).walletInfo,t=(0,i.useState)(r.topicId),w=t[0],B=t[1],E=(0,i.useState)(null),N=E[0],A=E[1],I=function(){var n=(0,e.Z)((function(){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return w?[4,C(w)]:(alert("Please enter a topic ID."),[2]);case 1:return n=r.sent(),A(n),[2]}}))}));return function(){return n.apply(this,arguments)}}();function C(n){return O.apply(this,arguments)}function O(){return O=(0,e.Z)((function(t){var e,a,c,i,o,l,u,h,d,p=arguments;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:e=p.length>1&&void 0!==p[1]?p[1]:[],a=p.length>2&&void 0!==p[2]?p[2]:[],c="mainnet"===r.network?"https://mainnet-public.mirrornode.hedera.com":"https://testnet.mirrornode.hedera.com",i="".concat(c,"/api/v1/topics/").concat(t,"/messages"),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,y.Z.get(i)];case 2:return o=s.sent(),l=o.data,u=l.messages,h=l.links,u.forEach((function(n){try{var r=JSON.parse(atob(n.message));e.push(r)}catch(d){console.error("Error parsing message:",d),a.push(n.consensusTimestamp)}})),h&&h.next?[4,C(t,e)]:[3,4];case 3:return[2,s.sent()];case 4:return[2,{balances:n(e),invalidMessages:a}];case 5:return d=s.sent(),console.error("Error fetching topic data:",d),[3,6];case 6:return[2]}}))})),O.apply(this,arguments)}return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)(o.Z,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(k(),{href:"/home",children:(0,c.jsx)(l.Z,{variant:"text",children:"Go to Creator"})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"HCS-20 Balances Viewer"}),(0,c.jsx)(h.Z,{label:"Enter Topic ID",value:w,onChange:function(n){return B(n.target.value)},fullWidth:!0,margin:"normal"}),(0,c.jsx)(l.Z,{variant:"contained",color:"primary",onClick:I,children:"Get Balances"}),N&&(0,c.jsx)(d.Z,{component:p.Z,children:(0,c.jsxs)(f.Z,{children:[(0,c.jsx)(m.Z,{children:(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:"Account ID"}),(0,c.jsx)(j.Z,{align:"right",children:"Balance"}),(0,c.jsx)(j.Z,{align:"right",children:"Transactions"})]})}),(0,c.jsx)(g.Z,{children:Object.entries(N.balances.balances).map((function(n){var r=(0,a.Z)(n,2),t=r[0],e=r[1];return(0,c.jsx)(i.Fragment,{children:Object.entries(e).map((function(n){var r=(0,a.Z)(n,2),e=r[0],s=r[1];return(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:e}),(0,c.jsx)(j.Z,{align:"right",children:s}),(0,c.jsx)(j.Z,{align:"right",children:(0,c.jsxs)(Z.Z,{children:[(0,c.jsx)(b.Z,{children:(0,c.jsx)(u.Z,{children:"View Transactions"})}),(0,c.jsx)(v.Z,{style:{backgroundColor:"#010101"},children:N.balances.transactionsByAccount&&N.balances.transactionsByAccount[t]&&N.balances.transactionsByAccount[t][e]?N.balances.transactionsByAccount[t][e].map((function(n,r){return(0,c.jsx)("div",{style:{marginBottom:"10px",textAlign:"left"},children:(0,c.jsx)("div",{style:{maxWidth:"100%"},children:(0,c.jsxs)(u.Z,{variant:"body1",color:"textPrimary",children:[n.op," ",n.amt&&n.amt+" "+t||"N/A"," ",n.from&&"from "+n.from," ",n.to&&" to "+n.to||"N/A"]})})},r)})):(0,c.jsx)(u.Z,{children:"No transactions"})})]})})]},e)}))},t)}))})]})}),N&&(0,c.jsx)(u.Z,{variant:"body1",gutterBottom:!0,children:(0,c.jsx)("pre",{children:JSON.stringify(N,null,2)})})]})})}}},function(n){n.O(0,[984,160,774,888,179],(function(){return r=1456,n(n.s=r);var r}));var r=n.O();_N_E=r}]);