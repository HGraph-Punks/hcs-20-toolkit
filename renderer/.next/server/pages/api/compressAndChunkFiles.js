"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/compressAndChunkFiles";
exports.ids = ["pages/api/compressAndChunkFiles"];
exports.modules = {

/***/ "@mongodb-js/zstd":
/*!***********************************!*\
  !*** external "@mongodb-js/zstd" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("@mongodb-js/zstd");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./pages/api/compressAndChunkFiles.ts":
/*!********************************************!*\
  !*** ./pages/api/compressAndChunkFiles.ts ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _mongodb_js_zstd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @mongodb-js/zstd */ \"@mongodb-js/zstd\");\n/* harmony import */ var _mongodb_js_zstd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_mongodb_js_zstd__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_1__]);\nformidable__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        // Handle non-POST requests\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const form = (0,formidable__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    form.parse(req, async (err, fields, files)=>{\n        if (err) {\n            console.error(\"Formidable parsing error:\", err);\n            return res.status(500).json({\n                success: false,\n                error: \"Error parsing form data\"\n            });\n        }\n        try {\n            // Assuming 'images' is the field name for the uploaded file\n            const imageFile = files.image[0]; // Only processing the first file\n            if (!imageFile) {\n                return res.status(400).json({\n                    success: false,\n                    error: \"No image file uploaded\"\n                });\n            }\n            console.log(imageFile);\n            const fileData = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(imageFile.filepath);\n            const fileHash = generateFileHash(Buffer.from(fileData));\n            const compressedData = await (0,_mongodb_js_zstd__WEBPACK_IMPORTED_MODULE_0__.compress)(fileData, 10);\n            const base64Data = compressedData.toString(\"base64\");\n            // TODO: add in dynamic byte sizing to exactly fit 1 kb per message\n            const constantPart = JSON.stringify({\n                c: \"\",\n                o: 0\n            });\n            const constantPartLength = constantPart.length;\n            const estimatedMaxChunks = Math.ceil(base64Data.length / 900);\n            const maxOSize = estimatedMaxChunks.toString().length;\n            const maxDataSizePerMessage = 900 - constantPartLength - maxOSize;\n            console.log(maxDataSizePerMessage);\n            // Determine MIME type from file extension, default to 'application/octet-stream' if unknown\n            const mimeType = imageFile.mimetype;\n            // Adjust chunk size as needed\n            const chunkSize = maxDataSizePerMessage;\n            const dataPrefix = `data:${mimeType};base64,`;\n            const chunks = chunkMessage(base64Data, chunkSize, dataPrefix);\n            // Only sending data for one file\n            res.status(200).json({\n                success: true,\n                chunkedImage: {\n                    index: parseInt(imageFile.originalFilename.split(\"/\")[1].split(\".\")[0]),\n                    chunks,\n                    fileHash\n                }\n            });\n        } catch (error) {\n            console.error(\"Error processing file:\", error);\n            res.status(500).json({\n                success: false,\n                error: `Error processing file: ${error.message}`\n            });\n        }\n    });\n}\nfunction chunkMessage(message, chunkSize, prefix) {\n    // TODO: Make chunks as efficient as possible with bytes\n    let messageArray = [];\n    for(let o = 0, offset = 0; offset < message.length; o++, offset += chunkSize){\n        // Adding prefix only to the first chunk\n        const chunkContent = o === 0 ? prefix + message.slice(offset, offset + chunkSize) : message.slice(offset, offset + chunkSize);\n        messageArray.push({\n            o,\n            c: chunkContent\n        });\n    }\n    return messageArray;\n}\nfunction generateFileHash(file) {\n    const hash = crypto__WEBPACK_IMPORTED_MODULE_3___default().createHash(\"sha256\");\n    hash.update(file);\n    return hash.digest(\"hex\");\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY29tcHJlc3NBbmRDaHVua0ZpbGVzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE0QztBQUNSO0FBQ2hCO0FBQ1E7QUFFckIsTUFBTUksTUFBTSxHQUFHO0lBQ2xCQyxHQUFHLEVBQUU7UUFDREMsVUFBVSxFQUFFLEtBQUs7S0FDcEI7Q0FDSixDQUFDO0FBRWEsZUFBZUMsT0FBTyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM1QyxJQUFJRCxHQUFHLENBQUNFLE1BQU0sS0FBSyxNQUFNLEVBQUU7UUFDdkIsMkJBQTJCO1FBQzNCLE9BQU9ELEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7WUFBRUMsS0FBSyxFQUFFLG9CQUFvQjtTQUFFLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQsTUFBTUMsSUFBSSxHQUFHYixzREFBVSxFQUFFO0lBQ3pCYSxJQUFJLENBQUNDLEtBQUssQ0FBQ1AsR0FBRyxFQUFFLE9BQU9RLEdBQUcsRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEdBQUs7UUFDMUMsSUFBSUYsR0FBRyxFQUFFO1lBQ0xHLE9BQU8sQ0FBQ04sS0FBSyxDQUFDLDJCQUEyQixFQUFFRyxHQUFHLENBQUMsQ0FBQztZQUNoRCxPQUFPUCxHQUFHLENBQUNFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO2dCQUFFUSxPQUFPLEVBQUUsS0FBSztnQkFBRVAsS0FBSyxFQUFFLHlCQUF5QjthQUFFLENBQUMsQ0FBQztRQUN0RixDQUFDO1FBRUQsSUFBSTtZQUNBLDREQUE0RDtZQUM1RCxNQUFNUSxTQUFTLEdBQUdILEtBQUssQ0FBQ0ksS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLGlDQUFpQztZQUVuRSxJQUFJLENBQUNELFNBQVMsRUFBRTtnQkFDWixPQUFPWixHQUFHLENBQUNFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO29CQUFFUSxP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LEdBQUdvQixNQUFNLEdBQUdELE9BQU8sQ0FBQ0ssS0FBSyxDQUFDRixNQUFNLEVBQUVBLE1BQU0sR0FBR1osU0FBUyxDQUFDLEdBQUdTLE9BQU8sQ0FBQ0ssS0FBSyxDQUFDRixNQUFNLEVBQUVBLE1BQU0sR0FBR1osU0FBUyxDQUFDO1FBQzdIVyxZQUFZLENBQUNJLElBQUksQ0FBQztZQUNkekIsQ0FBQztZQUNERCxDQUFDLEVBQUV3QixZQUFZO1NBQ2xCLENBQUMsQ0FBQztJQUNQLENBQUM7SUFDRCxPQUFPRixZQUFZLENBQUM7QUFDeEIsQ0FBQztBQUVELFNBQVMvQixnQkFBZ0IsQ0FBRW9DLElBQUksRUFBRTtJQUM3QixNQUFNQyxJQUFJLEdBQUc5RCx3REFBaUIsQ0FBQyxRQUFRLENBQUM7SUFDeEM4RCxJQUFJLENBQUNFLE1BQU0sQ0FBQ0gsSUFBSSxDQUFDLENBQUM7SUFDbEIsT0FBT0MsSUFBSSxDQUFDRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS9jb21wcmVzc0FuZENodW5rRmlsZXMudHM/OTU1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wcmVzcyB9IGZyb20gJ0Btb25nb2RiLWpzL3pzdGQnO1xuaW1wb3J0IGZvcm1pZGFibGUgZnJvbSAnZm9ybWlkYWJsZSc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICAgIGFwaToge1xuICAgICAgICBib2R5UGFyc2VyOiBmYWxzZSxcbiAgICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAgIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICAgICAgLy8gSGFuZGxlIG5vbi1QT1NUIHJlcXVlc3RzXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtID0gZm9ybWlkYWJsZSgpO1xuICAgIGZvcm0ucGFyc2UocmVxLCBhc3luYyAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Zvcm1pZGFibGUgcGFyc2luZyBlcnJvcjonLCBlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRXJyb3IgcGFyc2luZyBmb3JtIGRhdGEnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nICdpbWFnZXMnIGlzIHRoZSBmaWVsZCBuYW1lIGZvciB0aGUgdXBsb2FkZWQgZmlsZVxuICAgICAgICAgICAgY29uc3QgaW1hZ2VGaWxlID0gZmlsZXMuaW1hZ2VbMF07IC8vIE9ubHkgcHJvY2Vzc2luZyB0aGUgZmlyc3QgZmlsZVxuXG4gICAgICAgICAgICBpZiAoIWltYWdlRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIGltYWdlIGZpbGUgdXBsb2FkZWQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coaW1hZ2VGaWxlKVxuXG4gICAgICAgICAgICBjb25zdCBmaWxlRGF0YSA9IGZzLnJlYWRGaWxlU3luYyhpbWFnZUZpbGUuZmlsZXBhdGgpO1xuICAgICAgICAgICAgY29uc3QgZmlsZUhhc2ggPSBnZW5lcmF0ZUZpbGVIYXNoKEJ1ZmZlci5mcm9tKGZpbGVEYXRhKSlcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzZWREYXRhID0gYXdhaXQgY29tcHJlc3MoZmlsZURhdGEsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBjb21wcmVzc2VkRGF0YS50b1N0cmluZygnYmFzZTY0Jyk7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBpbiBkeW5hbWljIGJ5dGUgc2l6aW5nIHRvIGV4YWN0bHkgZml0IDEga2IgcGVyIG1lc3NhZ2VcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0YW50UGFydCA9IEpTT04uc3RyaW5naWZ5KHsgYzogJycsIG86IDAgfSk7XG4gICAgICAgICAgICBjb25zdCBjb25zdGFudFBhcnRMZW5ndGggPSBjb25zdGFudFBhcnQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgZXN0aW1hdGVkTWF4Q2h1bmtzID0gTWF0aC5jZWlsKGJhc2U2NERhdGEubGVuZ3RoIC8gOTAwKTtcbiAgICAgICAgICAgIGNvbnN0IG1heE9TaXplID0gZXN0aW1hdGVkTWF4Q2h1bmtzLnRvU3RyaW5nKCkubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCBtYXhEYXRhU2l6ZVBlck1lc3NhZ2UgPSA5MDAgLSBjb25zdGFudFBhcnRMZW5ndGggLSBtYXhPU2l6ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1heERhdGFTaXplUGVyTWVzc2FnZSlcbiAgICAgICAgICAgIC8vIERldGVybWluZSBNSU1FIHR5cGUgZnJvbSBmaWxlIGV4dGVuc2lvbiwgZGVmYXVsdCB0byAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyBpZiB1bmtub3duXG4gICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9IGltYWdlRmlsZS5taW1ldHlwZTtcblxuICAgICAgICAgICAgLy8gQWRqdXN0IGNodW5rIHNpemUgYXMgbmVlZGVkXG4gICAgICAgICAgICBjb25zdCBjaHVua1NpemUgPSBtYXhEYXRhU2l6ZVBlck1lc3NhZ2U7IFxuICAgICAgICAgICAgY29uc3QgZGF0YVByZWZpeCA9IGBkYXRhOiR7bWltZVR5cGV9O2Jhc2U2NCxgO1xuICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gY2h1bmtNZXNzYWdlKGJhc2U2NERhdGEsIGNodW5rU2l6ZSwgZGF0YVByZWZpeCk7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgc2VuZGluZyBkYXRhIGZvciBvbmUgZmlsZVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjaHVua2VkSW1hZ2U6IHsgaW5kZXg6IHBhcnNlSW50KGltYWdlRmlsZS5vcmlnaW5hbEZpbGVuYW1lLnNwbGl0KCcvJylbMV0uc3BsaXQoJy4nKVswXSksIGNodW5rcywgZmlsZUhhc2ggfSB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgZmlsZTonLCBlcnJvcik7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEVycm9yIHByb2Nlc3NpbmcgZmlsZTogJHtlcnJvci5tZXNzYWdlfWAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY2h1bmtNZXNzYWdlKG1lc3NhZ2UsIGNodW5rU2l6ZSwgcHJlZml4KSB7XG4gICAgLy8gVE9ETzogTWFrZSBjaHVua3MgYXMgZWZmaWNpZW50IGFzIHBvc3NpYmxlIHdpdGggYnl0ZXNcbiAgICBsZXQgbWVzc2FnZUFycmF5ID0gW107XG4gICAgZm9yIChsZXQgbyA9IDAsIG9mZnNldCA9IDA7IG9mZnNldCA8IG1lc3NhZ2UubGVuZ3RoOyBvKyssIG9mZnNldCArPSBjaHVua1NpemUpIHtcbiAgICAgICAgLy8gQWRkaW5nIHByZWZpeCBvbmx5IHRvIHRoZSBmaXJzdCBjaHVua1xuICAgICAgICBjb25zdCBjaHVua0NvbnRlbnQgPSBvID09PSAwID8gcHJlZml4ICsgbWVzc2FnZS5zbGljZShvZmZzZXQsIG9mZnNldCArIGNodW5rU2l6ZSkgOiBtZXNzYWdlLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgY2h1bmtTaXplKTtcbiAgICAgICAgbWVzc2FnZUFycmF5LnB1c2goe1xuICAgICAgICAgICAgbywgLy8gT3JkZXJcbiAgICAgICAgICAgIGM6IGNodW5rQ29udGVudCwgLy8gQ29udGVudFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VBcnJheTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVGaWxlSGFzaCAoZmlsZSkge1xuICAgIGNvbnN0IGhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2Jyk7XG4gICAgaGFzaC51cGRhdGUoZmlsZSk7XG4gICAgcmV0dXJuIGhhc2guZGlnZXN0KCdoZXgnKTtcbn0iXSwibmFtZXMiOlsiY29tcHJlc3MiLCJmb3JtaWRhYmxlIiwiZnMiLCJjcnlwdG8iLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImZvcm0iLCJwYXJzZSIsImVyciIsImZpZWxkcyIsImZpbGVzIiwiY29uc29sZSIsInN1Y2Nlc3MiLCJpbWFnZUZpbGUiLCJpbWFnZSIsImxvZyIsImZpbGVEYXRhIiwicmVhZEZpbGVTeW5jIiwiZmlsZXBhdGgiLCJmaWxlSGFzaCIsImdlbmVyYXRlRmlsZUhhc2giLCJCdWZmZXIiLCJmcm9tIiwiY29tcHJlc3NlZERhdGEiLCJiYXNlNjREYXRhIiwidG9TdHJpbmciLCJjb25zdGFudFBhcnQiLCJKU09OIiwic3RyaW5naWZ5IiwiYyIsIm8iLCJjb25zdGFudFBhcnRMZW5ndGgiLCJsZW5ndGgiLCJlc3RpbWF0ZWRNYXhDaHVua3MiLCJNYXRoIiwiY2VpbCIsIm1heE9TaXplIiwibWF4RGF0YVNpemVQZXJNZXNzYWdlIiwibWltZVR5cGUiLCJtaW1ldHlwZSIsImNodW5rU2l6ZSIsImRhdGFQcmVmaXgiLCJjaHVua3MiLCJjaHVua01lc3NhZ2UiLCJjaHVua2VkSW1hZ2UiLCJpbmRleCIsInBhcnNlSW50Iiwib3JpZ2luYWxGaWxlbmFtZSIsInNwbGl0IiwibWVzc2FnZSIsInByZWZpeCIsIm1lc3NhZ2VBcnJheSIsIm9mZnNldCIsImNodW5rQ29udGVudCIsInNsaWNlIiwicHVzaCIsImZpbGUiLCJoYXNoIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/compressAndChunkFiles.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/compressAndChunkFiles.ts"));
module.exports = __webpack_exports__;

})();