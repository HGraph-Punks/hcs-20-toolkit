(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{3136:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hashinal",function(){return n(2078)}])},2078:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(3842),i=n(4364),a=n(5556),s=n(4246),o=n(7378),c=n(2088),u=n(2750),l=n(920),p=n(1703),d=n(353),g=n(8082),h=n(2517),f=n(8544),m=n(9998),v=n(8134),x=n(8420),b=n(4200),w=n(8830),y=n(2875),j=n.n(y),Z=n(816).lW,_=function(){function e(t,n,r,a,s,o){(0,i.Z)(this,e),this.client=null,this.topicId="",this.setUploadProgress=function(e){},this.setImageData=function(e){},this.client="mainnet"===a?x.KU.forMainnet():x.KU.forTestnet(),this.client.setOperator(t,n),this.topicId=r,this.setImageData=s,this.setUploadProgress=o}var t=e.prototype;return t.uploadToHederaTopic=function(e,t){var n=this;return(0,r.Z)((function(){var r,i,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return(r=(new x.yM).setTopicId(n.topicId).setMessage(e)).freezeWith(n.client),r.sign(t),[4,r.execute(n.client)];case 1:return[4,a.sent().getReceipt(n.client)];case 2:return i=a.sent(),s=i.topicSequenceNumber,console.log("Sequence number:",s),[2]}}))}))()},t.chunkMessage=function(e,t){for(var n=Math.ceil(e.length/t),r=[],i=0,a=0;i<n;i++,a+=t)r.push({o:i,c:e.slice(a,a+t)});return r},t.getMimeType=function(e){return{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"}[e.split(".").pop().toLowerCase()]||"application/octet-stream"},t.uploadImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return(0,r.Z)((function(){var r,i,s,o,c,u,l,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:r=n.chunkMessage(e,1e3),i=r.length,s=0,o=j()(r,50),c=0,a.label=1;case 1:if(!(c<o.length))return[3,10];u=!1,l=3,a.label=2;case 2:if(u||!(l>0))return[3,8];a.label=3;case 3:return a.trys.push([3,5,,7]),[4,Promise.all(o[c].map((function(e){return n.uploadToHederaTopic(JSON.stringify(e),t).then((function(){var e=++s/i*100;n.setUploadProgress(e),console.log("Upload progress: ".concat(e,"%"))}))})))];case 4:return a.sent(),u=!0,[3,7];case 5:return p=a.sent(),console.error("Error uploading chunk ".concat(c,":"),p),l--,[4,new Promise((function(e){return setTimeout(e,2e3)}))];case 6:return a.sent(),[3,7];case 7:return[3,2];case 8:if(!u)throw new Error("Failed to upload chunk ".concat(c," after retries."));a.label=9;case 9:return c++,[3,1];case 10:return[2]}}))}))()},t.getMessagesFromTopic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return(0,r.Z)((function(){var r,i,s,o,c,u,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),r="https://mainnet-public.mirrornode.hedera.com/api/v1/topics/".concat(n.topicId,"/messages"),t&&(r+="?timestamp=gte:".concat(t)),[4,w.Z.get(r)];case 1:return i=a.sent(),s=i.data,o=s.messages,c=s.links,e=e.concat(o.map((function(e){return Z.from(e.message,"base64").toString()}))),c&&c.next?(u=o[o.length-1].consensus_timestamp,[4,n.getMessagesFromTopic(e,u)]):[3,3];case 2:return[2,a.sent()];case 3:return[2,e];case 4:return l=a.sent(),console.error("Error fetching messages:",l),[3,5];case 5:return[2]}}))}))()},e}(),I=b.z.object({p:b.z.string().toLowerCase().refine((function(e){return["hcs-20"].includes(e)})),op:b.z.string().toLowerCase().refine((function(e){return["deploy","mint","burn","transfer","register"].includes(e)})),memo:b.z.string().optional()}),T=b.z.string().regex(/^(0|(?:[1-9]\d*))\.(0|(?:[1-9]\d*))\.(0|(?:[1-9]\d*))(?:-([a-z]{5}))?$/).transform((function(e){return e.includes("-")?e.split("-")[0]:e}));I.extend({name:b.z.string().min(1).max(100),topicId:T,metadata:b.z.string().optional(),privateTopic:b.z.boolean()});function S(){var e=(0,o.useState)(!1),t=e[0],n=e[1],i=(0,o.useState)(""),b=i[0],y=i[1],j=(0,o.useState)(""),Z=(j[0],j[1]),I=(0,o.useContext)(v.z).walletInfo,T=(0,o.useState)(""),S=T[0],k=T[1],M=(0,o.useState)(null),P=M[0],U=M[1],z=(0,o.useState)(0),C=z[0],K=z[1],N=(0,o.useState)(null),E=N[0],H=N[1],F=(0,o.useState)(0),O=F[0],q=F[1];function B(){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)((function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,w.Z.get("https://api.coingecko.com/api/v3/simple/price?ids=hedera-hashgraph&vs_currencies=usd")];case 1:return e=n.sent(),[2,e.data["hedera-hashgraph"].usd];case 2:return t=n.sent(),console.error("Failed to fetch USD to HBAR rate:",t),[2,null];case 3:return[2]}}))}))).apply(this,arguments)}var W=function(){var e=(0,r.Z)((function(){var e,t;return(0,a.__generator)(this,(function(n){return(e="mainnet"===I.network?x.KU.forMainnet():x.KU.forTestnet()).setOperator(I.accountId,I.privateKey),t="mainnet"===I.network?"0.0.999000":"0.0.1594",(new x.qe).addHbarTransfer(I.accountId,x.iG.fromTinybars(-2e10)).addHbarTransfer(t,x.iG.fromTinybars(2e10)).execute(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return t={p:"hashinals",op:"deploy",t_id:e,to:I.accountId},(n="mainnet"===I.network?x.KU.forMainnet():x.KU.forTestnet()).setOperator(I.accountId,I.privateKey),[4,(new x.yM).setTopicId("0.0.2658237").setMessage(JSON.stringify(t)).execute(n)];case 1:return[4,i.sent().getReceipt(n)];case 2:return r=i.sent(),console.log("Message submitted successfully to topic 0.0.2658160, sequence number: ".concat(r.topicSequenceNumber)),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)((function(){var e,t,r,i,s,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(n(!0),!I.accountId)return alert("Must Enter Wallet Info first"),n(!1),[2];a.label=1;case 1:return a.trys.push([1,8,,9]),(e="mainnet"===I.network?x.KU.forMainnet():x.KU.forTestnet()).setOperator(I.accountId,I.privateKey),t=new x.z,r=x._q.generate(),t.setSubmitKey(r),Z(r.toString()),[4,t.execute(e)];case 2:return[4,a.sent().getReceipt(e)];case 3:return i=a.sent(),s=i.topicId.toString(),y(s),s&&P?[4,A(s)]:[3,7];case 4:return a.sent(),[4,D(s,r)];case 5:return a.sent(),[4,W()];case 6:a.sent(),k("Hashinal Inscribed and deploy successful!"),a.label=7;case 7:return n(!1),[3,9];case 8:return o=a.sent(),console.error("Error creating topic:",o),k("Error creating topic"),n(!1),[3,9];case 9:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)((function(e,t){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return E?[4,new _(I.accountId,I.privateKey,e,I.network,H,K).uploadImage(E,t)]:(console.error("No image data found"),k("No image data to upload"),[2]);case 1:return n.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return(0,s.jsxs)(c.Z,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"Hashinals"}),(0,s.jsxs)(l.Z,{elevation:3,style:{padding:"20px",maxWidth:"400px",margin:"20px auto",marginTop:"20px"},children:[(0,s.jsx)("div",{style:{width:"100%",maxWidth:"400px",margin:"0 auto"},children:E?(0,s.jsx)("img",{style:{width:"100%",maxWidth:"400px",objectFit:"cover",margin:"0 auto",position:"relative"},src:E,alt:"Uploaded"}):(0,s.jsx)(p.Z,{height:"300px",bgcolor:"#1C1C1C",display:"flex",alignItems:"center",justifyContent:"center",children:(0,s.jsx)(u.Z,{color:"textSecondary",children:"No Image Uploaded"})})}),(0,s.jsxs)(d.Z,{style:{float:"left",width:"100%",margin:"15px 0"},variant:"contained",component:"label",children:["Upload File",(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif",onChange:function(e){var t=e.target.files[0];K(0),y(null),U(t);t&&["image/png","image/jpeg","image/jpg","image/gif"].includes(t.type)?(U(t),window.electronAPI?window.electronAPI.invoke("read-file",t.path).then(function(){var e=(0,r.Z)((function(e){var t,n,r,i;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return console.log(e),H(e),t=50,n=1e-4,[4,B()];case 1:return(r=a.sent())?(i=e.length,q(((t*r+n*(i/1024))/r).toFixed(6)),[2]):(k("Failed to fetch the current HBAR rate."),[2])}}))}));return function(t){return e.apply(this,arguments)}}()):console.error("electronAPI is not available")):k("Invalid file type. Please select a PNG, JPG, or JPEG image.")},hidden:!0})]}),(0,s.jsx)("br",{}),(0,s.jsx)(d.Z,{style:{float:"left",width:"100%",margin:"15px 0"},variant:"contained",color:"primary",onClick:G,disabled:t||!E,children:t?(0,s.jsx)(g.Z,{size:24}):"Inscribe"}),(0,s.jsx)("br",{}),(0,s.jsxs)(p.Z,{padding:2,bgcolor:"black",boxShadow:4,borderRadius:2,marginTop:12,children:[C>0&&(0,s.jsx)(p.Z,{display:"flex",alignItems:"center",width:"100%",children:(0,s.jsxs)(p.Z,{width:"100%",mr:1,children:[(0,s.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,children:(0,s.jsxs)(u.Z,{variant:"h6",color:"white",children:["Inscription Progress:  ","".concat(Math.round(C),"%")]})}),(0,s.jsx)(h.Z,{variant:"determinate",value:C})]})}),b&&(0,s.jsxs)(p.Z,{paddingY:1,marginTop:2,children:[(0,s.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,children:"Hashinal Inscribing to:"}),(0,s.jsx)(u.Z,{variant:"h6",color:"violet",children:b})]}),(0,s.jsx)(p.Z,{paddingY:1,children:(0,s.jsx)(f.ZP,{container:!0,spacing:2,children:(0,s.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,s.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,children:"Inscribing Fee:"}),(0,s.jsxs)(u.Z,{variant:"h6",color:"violet",children:[O,"\u210f"]})]})})})]})]}),(0,s.jsx)(m.Z,{open:!!S,autoHideDuration:6e3,onClose:function(){return k("")},message:S})]})}},5545:function(){},6047:function(){},303:function(){},1566:function(){},5745:function(){},5162:function(){},1826:function(){}},function(e){e.O(0,[518,442,968,384,510,774,888,179],(function(){return t=3136,e(e.s=t);var t}));var t=e.O();_N_E=t}]);