(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{671:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hcs-20ledger",function(){return r(5638)}])},5638:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return T}});var t=r(3842);function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"===typeof e)return a(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=r(5556),c=r(4246),o=r(7378),l=r(4591),u=r(2750),d=r(5705),h=r(920),p=r(3049),m=r(8238),x=r(2222),j=r(4447),f=r(8196),b=r(2088),Z=r(353),y=r(1751),g=r(2013),v=r(8082),_=r(8830),k=r(8134),S=r(9894),w=r.n(S),I=null;function T(){var e=(0,o.useState)(!1),n=e[0],r=e[1],a=(0,o.useContext)(k.z).walletInfo,S=i("0.0.4350190"===a.topicId?(0,o.useState)("0.0.4354800"):(0,o.useState)(a.topicId),2),T=S[0],M=S[1],A=(0,o.useState)(null),E=A[0],O=A[1],C=(0,o.useState)(!1),D=C[0],F=C[1],N=(0,o.useState)(""),B=N[0],R=N[1],P=(0,o.useState)(1),z=P[0],H=(P[1],(0,o.useState)(50)),W=H[0],X=(H[1],z*W),q=X-W,G=(Object.entries((null===E||void 0===E?void 0:E.balances)||{}).slice(q,X),Math.ceil(Object.keys((null===E||void 0===E?void 0:E.balances)||{}).length/W),function(){var e=(0,t.Z)((function(){var e,n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:r(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,J(T)];case 2:return e=t.sent(),O(e),r(!1),[3,5];case 3:return n=t.sent(),console.error("Error while fetching and processing data:",n),[3,5];case 4:return[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}());function J(e){return K.apply(this,arguments)}function K(){return K=(0,t.Z)((function(e){var n,r,t,i,c,o,l,u,d,h,p,m=arguments;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:n=m.length>1&&void 0!==m[1]?m[1]:[],r=m.length>2&&void 0!==m[2]?m[2]:[],t=m.length>3?m[3]:void 0,i="mainnet"===a.network?"https://mainnet-public.mirrornode.hedera.com":"https://testnet.mirrornode.hedera.com",c=t?"".concat(i).concat(t):"".concat(i,"/api/v1/topics/").concat(e,"/messages?limit=1000"),s.label=1;case 1:return s.trys.push([1,6,,7]),[4,_.Z.get(c)];case 2:return o=s.sent(),l=o.data,u=l.messages,d=l.links,u.forEach((function(e){try{var t=JSON.parse(atob(e.message));t.payer_account_id=e.payer_account_id,n.push(t)}catch(p){console.error("Error parsing message:",p),r.push(e.consensusTimestamp)}})),d&&d.next?[4,J(e,n,r,d.next)]:[3,4];case 3:return[2,s.sent()];case 4:return h={},[4,L(n)];case 5:return[2,(h.balances=s.sent(),h.invalidMessages=r,h)];case 6:return p=s.sent(),console.error("Error fetching topic data:",p),[3,7];case 7:return[2]}}))})),K.apply(this,arguments)}!function(){var e=(0,t.Z)((function(e,n){return(0,s.__generator)(this,(function(r){return I?[2,I.invoke("fetch-topic-data",e,n)]:(console.error("ipcRenderer is not available"),[2])}))}))}();function L(e){return U.apply(this,arguments)}function U(){return U=(0,t.Z)((function(e){var n,r,t,a,i,c,o,l,u,d,h,p,m,x,j,f,b,Z,y,g,v,_,k,S;return(0,s.__generator)(this,(function(s){n={},r={},t=[],a={},i={},c=!D,o=!0,l=!1,u=void 0;try{for(d=e[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){switch(p=h.value,m=p.op,x=p.tick,j=p.amt,f=p.from,b=p.to,Z=p.payer_account_id,y=p.max,g=p.lim,v=p.metadata,_=p.m,n[x]||(n[x]={},a[x]={max:1/0,lim:1/0,totalMinted:0},r[x]={}),r[x][f]||(r[x][f]=[]),b&&!r[x][b]&&(r[x][b]=[]),k=parseInt(j),S="",m){case"deploy":a[x].max=y?parseInt(y):1/0,a[x].lim=g?parseInt(g):1/0,i[x]={maxSupply:parseInt(y)||"Not Set",currentSupply:0,lim:parseInt(g)||"Not Set",metadata:v||"No Metadata",memo:_||""};break;case"mint":if(i[x]?i[x].currentSupply+=parseInt(j):(S="No Deploy transaction for this Mint tick",t.push({op:m,tick:x,amt:j,to:b,payer_account_id:Z,failureReason:S})),k>a[x].lim)return S="Mint amount exceeds limit per transaction.",t.push({op:m,tick:x,amt:j,to:b,payer_account_id:Z,failureReason:S}),[2];if(a[x].totalMinted+k>a[x].max)return S="Mint amount exceeds maximum supply.",t.push({op:m,tick:x,amt:j,to:b,payer_account_id:Z,failureReason:S}),[2];a[x].totalMinted+=k,n[x][b]=(n[x][b]||0)+k;break;case"burn":if(!(n[x][f]>=k)||c&&Z!==f)return S=n[x][f]<k?"Insufficient balance for burn operation.":"Payer account ID does not match the account from which points are being burned.",t.push({op:m,tick:x,amt:j,from:f,to:b,payer_account_id:Z,failureReason:S}),[2];n[x][f]-=k;break;case"transfer":if(!(n[x][f]>=k)||c&&Z!==f)return S=n[x][f]<k?"Insufficient balance for transfer operation.":"Payer account ID does not match the sender's account.",t.push({op:m,tick:x,amt:j,from:f,to:b,payer_account_id:Z,failureReason:S}),[2];n[x][f]-=k,n[x][b]=(n[x][b]||0)+k}"mint"!==m&&"burn"!==m&&"transfer"!==m||("mint"!==m&&r[x][f].push({op:m,amt:k,from:f,to:b,timestamp:p.consensus_timestamp}),b&&r[x][b].push({op:m,amt:k,from:f,to:b,timestamp:p.consensus_timestamp}))}}catch(w){l=!0,u=w}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}return[2,{balances:n,transactionsByAccount:r,failedTransactions:t,tokenDetails:i}]}))})),U.apply(this,arguments)}return(0,c.jsx)(o.Fragment,{children:(0,c.jsxs)(b.Z,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(w(),{href:"/home",children:(0,c.jsx)(Z.Z,{variant:"text",children:"Home"})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"HCS-20 Balances Viewer"}),(0,c.jsx)(l.Z,{label:"Enter Topic ID",value:T,onChange:function(e){return M(e.target.value)},fullWidth:!0,margin:"normal"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(y.Z,{sx:{display:"block"},control:(0,c.jsx)(g.Z,{checked:D,onChange:function(){return F(!D)},name:"loading",color:"primary"}),label:"Submit Key"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z.Z,{variant:"contained",color:"primary",disabled:!0,children:(0,c.jsx)(v.Z,{size:24})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"Indexing..."]}):(0,c.jsx)(Z.Z,{variant:"contained",color:"primary",onClick:G,children:"Get Balances"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),n?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(o.Fragment,{children:(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Z,{label:"Filter by Account ID",value:B,onChange:function(e){return R(e.target.value)},fullWidth:!0,margin:"normal"}),(0,c.jsx)(u.Z,{variant:"h4",gutterBottom:!0,style:{marginTop:"20px"},children:"Point Details"}),(0,c.jsx)(d.Z,{component:h.Z,children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(m.Z,{children:(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:"Tick"}),(0,c.jsx)(j.Z,{children:"Max Supply"}),(0,c.jsx)(j.Z,{children:"Current Supply"}),(0,c.jsx)(j.Z,{children:"Limit per Mint Transaction"}),(0,c.jsx)(j.Z,{children:"Metadata"})]})}),(0,c.jsx)(f.Z,{children:E&&E.balances&&Object.entries(E.balances.tokenDetails).map((function(e){var n=i(e,2),r=n[0],t=n[1];return(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:r}),(0,c.jsx)(j.Z,{children:t&&t.maxSupply}),(0,c.jsx)(j.Z,{children:t&&t.currentSupply}),(0,c.jsx)(j.Z,{children:t&&t.lim}),(0,c.jsx)(j.Z,{children:t&&t.metadata})]},r)}))})]})})]})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(u.Z,{variant:"h4",gutterBottom:!0,style:{marginTop:"20px"},children:"Balances"}),E&&(0,c.jsx)(d.Z,{component:h.Z,children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(m.Z,{children:(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:"Account ID"}),(0,c.jsx)(j.Z,{children:"Tick"}),(0,c.jsx)(j.Z,{align:"right",children:"Balance"})]})}),(0,c.jsx)(f.Z,{children:E.balances&&Object.entries(E.balances.balances).map((function(e){var n=i(e,2),r=n[0],t=n[1];return(0,c.jsx)(o.Fragment,{children:Object.entries(t).filter((function(e){var n=i(e,1)[0];return!B||n.includes(B)})).map((function(e){var n=i(e,2),t=n[0],a=n[1];return(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:t}),(0,c.jsx)(j.Z,{children:r}),(0,c.jsx)(j.Z,{align:"right",children:a})]},t)}))},r)}))})]})}),E&&E.balances&&E.balances.failedTransactions&&E.balances.failedTransactions.length>0&&(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(u.Z,{variant:"h4",gutterBottom:!0,style:{marginTop:"20px"},children:"Failed Transactions"}),(0,c.jsx)(d.Z,{component:h.Z,children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(m.Z,{children:(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:"Operation"}),(0,c.jsx)(j.Z,{children:"Tick"}),(0,c.jsx)(j.Z,{children:"Amount"}),(0,c.jsx)(j.Z,{children:"From"}),(0,c.jsx)(j.Z,{children:"To"}),(0,c.jsx)(j.Z,{children:"Payer Account ID"}),(0,c.jsx)(j.Z,{children:"Reason"})]})}),(0,c.jsx)(f.Z,{children:E.balances.failedTransactions.map((function(e,n){return(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(j.Z,{children:e.op}),(0,c.jsx)(j.Z,{children:e.tick}),(0,c.jsx)(j.Z,{children:e.amt}),(0,c.jsx)(j.Z,{children:e.from}),(0,c.jsx)(j.Z,{children:e.to}),(0,c.jsx)(j.Z,{children:e.payer_account_id}),(0,c.jsx)(j.Z,{children:e.failureReason})]},n)}))})]})})]}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{})]})})}window.process&&"renderer"===window.process.type&&(I=window.require("electron").ipcRenderer)}},function(e){e.O(0,[442,472,774,888,179],(function(){return n=671,e(e.s=n);var n}));var n=e.O();_N_E=n}]);