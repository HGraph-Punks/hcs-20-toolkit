(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{1456:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ledger",function(){return r(8639)}])},8639:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return N}});var t=r(3842),a=r(1809),s=r(5556),c=r(4246),i=r(7378),o=r(8038),l=r.n(o),u=r(2088),h=r(353),d=r(2750),p=r(1083),x=r(5705),f=r(920),m=r(3049),j=r(8238),g=r(2222),Z=r(4447),b=r(8196),v=r(212),y=r(1223),_=r(5048),w=r(8830),k=r(8134),B=r(9894),E=r.n(B);function N(){var n=function(n){var e={},r={};return n.forEach((function(n){var t=n.op,a=n.tick,s=n.amt,c=n.from,i=n.to;switch(e[a]||(e[a]={}),r[a]||(r[a]={}),t){case"mint":e[a][i]=(e[a][i]||0)+parseInt(s);break;case"burn":e[a][c]-=parseInt(s);break;case"transfer":e[a][c]-=parseInt(s),e[a][i]=(e[a][i]||0)+parseInt(s)}r[a][c]||(r[a][c]=[]),r[a][i]||(r[a][i]=[]),r[a][c].push({op:t,amt:s,to:i,from:c}),r[a][i].push({op:t,amt:s,to:i,from:c})})),console.log(e),{balances:e,transactionsByAccount:r}},e=(0,i.useContext)(k.z).walletInfo,r=(0,i.useState)(e.topicId),o=r[0],B=r[1],N=(0,i.useState)(null),A=N[0],C=N[1],I=function(){var n=(0,t.Z)((function(){var n;return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return o?[4,T(o)]:(alert("Please enter a topic ID."),[2]);case 1:return n=e.sent(),C(n),[2]}}))}));return function(){return n.apply(this,arguments)}}();function T(n){return O.apply(this,arguments)}function O(){return O=(0,t.Z)((function(r){var t,a,c,i,o,l,u,h,d,p=arguments;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:t=p.length>1&&void 0!==p[1]?p[1]:[],a=p.length>2&&void 0!==p[2]?p[2]:[],c="mainnet"===e.network?"https://mainnet-public.mirrornode.hedera.com":"https://testnet.mirrornode.hedera.com",i="".concat(c,"/api/v1/topics/").concat(r,"/messages"),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,w.Z.get(i)];case 2:return o=s.sent(),l=o.data,u=l.messages,h=l.links,u.forEach((function(n){try{var e=JSON.parse(atob(n.message));t.push(e)}catch(d){console.error("Error parsing message:",d),a.push(n.consensusTimestamp)}})),h&&h.next?[4,T(r,t)]:[3,4];case 3:return[2,s.sent()];case 4:return[2,{balances:n(t),invalidMessages:a}];case 5:return d=s.sent(),console.error("Error fetching topic data:",d),[3,6];case 6:return[2]}}))})),O.apply(this,arguments)}return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l(),{children:(0,c.jsx)("title",{children:"HCS-20 Toolset - Ledger"})}),(0,c.jsxs)(u.Z,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(E(),{href:"/home",children:(0,c.jsx)(h.Z,{variant:"text",children:"Go to Creator"})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(d.Z,{variant:"h4",gutterBottom:!0,children:"HCS-20 Token Balances Viewer"}),(0,c.jsx)(p.Z,{label:"Enter Topic ID",value:o,onChange:function(n){return B(n.target.value)},fullWidth:!0,margin:"normal"}),(0,c.jsx)(h.Z,{variant:"contained",color:"primary",onClick:I,children:"Get Balances"}),A&&(0,c.jsx)(x.Z,{component:f.Z,children:(0,c.jsxs)(m.Z,{children:[(0,c.jsx)(j.Z,{children:(0,c.jsxs)(g.Z,{children:[(0,c.jsx)(Z.Z,{children:"Account ID"}),(0,c.jsx)(Z.Z,{align:"right",children:"Balance"}),(0,c.jsx)(Z.Z,{align:"right",children:"Transactions"})]})}),(0,c.jsx)(b.Z,{children:Object.entries(A.balances.balances).map((function(n){var e=(0,a.Z)(n,2),r=e[0],t=e[1];return(0,c.jsx)(i.Fragment,{children:Object.entries(t).map((function(n){var e=(0,a.Z)(n,2),t=e[0],s=e[1];return(0,c.jsxs)(g.Z,{children:[(0,c.jsx)(Z.Z,{children:t}),(0,c.jsx)(Z.Z,{align:"right",children:s}),(0,c.jsx)(Z.Z,{align:"right",children:(0,c.jsxs)(v.Z,{children:[(0,c.jsx)(y.Z,{children:(0,c.jsx)(d.Z,{children:"View Transactions"})}),(0,c.jsx)(_.Z,{style:{backgroundColor:"#010101"},children:A.balances.transactionsByAccount&&A.balances.transactionsByAccount[r]&&A.balances.transactionsByAccount[r][t]?A.balances.transactionsByAccount[r][t].map((function(n,e){return(0,c.jsx)("div",{style:{marginBottom:"10px",textAlign:"left"},children:(0,c.jsx)("div",{style:{maxWidth:"100%"},children:(0,c.jsxs)(d.Z,{variant:"body1",color:"textPrimary",children:[n.op," ",n.amt&&n.amt+" "+r||"N/A"," ",n.from&&"from "+n.from," ",n.to&&" to "+n.to||"N/A"]})})},e)})):(0,c.jsx)(d.Z,{children:"No transactions"})})]})})]},t)}))},r)}))})]})}),A&&(0,c.jsx)(d.Z,{variant:"body1",gutterBottom:!0,children:(0,c.jsx)("pre",{children:JSON.stringify(A,null,2)})})]})]})}}},function(n){n.O(0,[984,160,774,888,179],(function(){return e=1456,n(n.s=e);var e}));var e=n.O();_N_E=e}]);